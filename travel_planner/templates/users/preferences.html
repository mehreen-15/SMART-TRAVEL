{% extends 'base/base.html' %}
{% load static %}

{% block title %}My Travel Preferences - Smart Travel{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">My Travel Preferences</h1>
    
    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">Travel Preferences</h4>
                    <a href="{% url 'users:edit_preferences' %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-edit me-1"></i>Edit Preferences
                    </a>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h5><i class="fas fa-globe-americas me-2 text-primary"></i>Destination Types</h5>
                                {% if travel_preferences.destination_type %}
                                    <p>{{ travel_preferences.destination_type }}</p>
                                {% else %}
                                    <p class="text-muted fst-italic">Not specified</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h5><i class="fas fa-money-bill-wave me-2 text-primary"></i>Budget Preference</h5>
                                {% if travel_preferences.budget_preference %}
                                    <p>{{ travel_preferences.get_budget_preference_display }}</p>
                                {% else %}
                                    <p class="text-muted fst-italic">Not specified</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h5><i class="fas fa-hiking me-2 text-primary"></i>Travel Style</h5>
                                {% if travel_preferences.travel_style %}
                                    <p>{{ travel_preferences.get_travel_style_display }}</p>
                                {% else %}
                                    <p class="text-muted fst-italic">Not specified</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h5><i class="fas fa-utensils me-2 text-primary"></i>Dietary Restrictions</h5>
                                {% if travel_preferences.dietary_restrictions %}
                                    <p>{{ travel_preferences.dietary_restrictions }}</p>
                                {% else %}
                                    <p class="text-muted fst-italic">None specified</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5><i class="fas fa-list-ul me-2 text-primary"></i>Preferred Activities</h5>
                        {% if travel_preferences.preferred_activities %}
                            <p>{{ travel_preferences.preferred_activities }}</p>
                        {% else %}
                            <p class="text-muted fst-italic">Not specified</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">Travel Recommendations</h4>
                </div>
                <div class="card-body">
                    {% if travel_preferences.destination_type or travel_preferences.travel_style %}
                        <div class="recommended-destinations">
                            <h5 class="mb-3">Based on your preferences, you might enjoy:</h5>
                            <div class="row">
                                {% if travel_preferences.travel_style == 'adventure' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1551632811-561732d1e306?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Adventure" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Adventure Destinations</h5>
                                            <p class="card-text">Mountain hiking, white water rafting, and other exciting outdoor activities.</p>
                                        </div>
                                    </div>
                                </div>
                                {% elif travel_preferences.travel_style == 'relaxation' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1540202404-a2f29016b523?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Relaxation" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Relaxation Getaways</h5>
                                            <p class="card-text">Peaceful beaches, spa resorts, and tranquil retreats.</p>
                                        </div>
                                    </div>
                                </div>
                                {% elif travel_preferences.travel_style == 'cultural' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1580060839134-75a5edca2e99?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Cultural" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Cultural Exploration</h5>
                                            <p class="card-text">Historical sites, museums, and immersive local experiences.</p>
                                        </div>
                                    </div>
                                </div>
                                {% elif travel_preferences.travel_style == 'food' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Food" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Culinary Journeys</h5>
                                            <p class="card-text">Food tours, cooking classes, and renowned restaurants.</p>
                                        </div>
                                    </div>
                                </div>
                                {% elif travel_preferences.travel_style == 'eco' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Eco" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Eco-friendly Travel</h5>
                                            <p class="card-text">Sustainable destinations, nature reserves, and eco-lodges.</p>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if travel_preferences.budget_preference == 'budget' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1520277739336-7bf67edfa768?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Budget" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Budget-Friendly Options</h5>
                                            <p class="card-text">Affordable accommodations, local eateries, and free attractions.</p>
                                        </div>
                                    </div>
                                </div>
                                {% elif travel_preferences.budget_preference == 'luxury' %}
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Luxury" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Luxury Experiences</h5>
                                            <p class="card-text">Five-star hotels, gourmet dining, and premium services.</p>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                <div class="col-md-4 mb-3">
                                    <div class="card h-100">
                                        <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=1200" class="card-img-top" alt="Personalized" style="height: 200px; object-fit: cover;">
                                        <div class="card-body">
                                            <h5 class="card-title">Personalized For You</h5>
                                            <p class="card-text">Explore our destination finder for tailored travel recommendations.</p>
                                            <a href="{% url 'destinations:list' %}" class="btn btn-primary btn-sm">Explore Destinations</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-map-marked-alt fa-4x text-muted mb-3"></i>
                            <h5>Complete your preferences to get personalized recommendations!</h5>
                            <p class="text-muted">We'll suggest destinations and experiences based on your travel style and interests.</p>
                            <a href="{% url 'users:edit_preferences' %}" class="btn btn-primary mt-2">
                                <i class="fas fa-edit me-1"></i>Set My Preferences
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Your Profile</h4>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        {% if user.userprofile.profile_picture %}
                        <img src="{{ user.userprofile.profile_picture.url }}" alt="{{ user.username }}" class="rounded-circle img-thumbnail" style="width: 100px; height: 100px; object-fit: cover;">
                        {% else %}
                        <img src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&background=0D8ABC&color=fff&size=100" alt="{{ user.username }}" class="rounded-circle img-thumbnail" style="width: 100px; height: 100px; object-fit: cover;">
                        {% endif %}
                    </div>
                    <h5 class="text-center mb-3">{{ user.get_full_name }}</h5>
                    <div class="d-grid gap-2">
                        <a href="{% url 'users:profile' %}" class="btn btn-outline-primary">
                            <i class="fas fa-user me-1"></i>View Full Profile
                        </a>
                        <a href="{% url 'users:edit_profile' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-edit me-1"></i>Edit Profile
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Quick Links</h4>
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="{% url 'destinations:list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-globe me-2"></i>Explore Destinations
                        </a>
                        <a href="{% url 'bookings:trip_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-suitcase me-2"></i>My Trips
                        </a>
                        <a href="{% url 'bookings:create_trip' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus-circle me-2"></i>Plan a New Trip
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 